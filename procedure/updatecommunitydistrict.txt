create or replace PROCEDURE updatecommunitydistrict (
    vcidcommunity   IN   community.id_community%TYPE,
    vciddistrict       IN   community.id_district%TYPE
) IS

    CURSOR curcommunity IS
    SELECT
        *
    FROM
        community
    FOR UPDATE;

    rowcommunity   community%rowtype;
    pcommunity   community.id_community%TYPE;
BEGIN
    OPEN curcommunity;
    LOOP
        FETCH curcommunity INTO rowcommunity;
        EXIT WHEN curcommunity%notfound;
        IF rowcommunity.id_community = vcidcommunity THEN
            UPDATE community
            SET
                id_district = vciddistrict
            WHERE
                CURRENT OF curcommunity;

        END IF;

    END LOOP;

    CLOSE curcommunity;
    commit;
EXCEPTION
    WHEN no_data_found THEN
        dbms_output.put_line('NO EXISTE LA COMUNIDAD');
    WHEN OTHERS THEN
        dbms_output.put_line('CODIGO:' || sqlcode);
        dbms_output.put_line('MENSAJE:' || sqlerrm);
END updatecommunitydistrict;